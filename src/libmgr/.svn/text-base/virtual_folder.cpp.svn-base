#include "virtual_folder.hpp"

namespace doclib
{

    namespace libmgr
    {

        int virtual_folder::_next_id = -1;

        virtual_folder::virtual_folder(string path)
            :	doc_file_item(_next_id, path, "vfolder")
        {
            // root virtual folder must have -1 as id
            if (_next_id == -1)
                assert(_path == "/");

            // increment id for next virtual folder instanciation
            ++_next_id;
        }

        // add a child to this virtual folder
        void virtual_folder::add_child(doc_file_item * p_file)
        {
            _children.push_back(p_file);
        }

        // remove a child
        void virtual_folder::remove_child(int child_id)
        {
            file_list_t::iterator it = _children.begin();
            while(it != _children.end())
            {
                doc_file_item * p_cur = *it;
                if(p_cur->get_id() == child_id)
                {
                    _children.erase(it);
                    return;
                }
                ++it;
            }
        }
    }

}
